# Network-on-Chip with Wormhole Switching Simulation

### CLI Flags
- Logging:
    - `-log`: output info level logs
    - `-deubg`: output debug level logs
    - `-trace`: output trace level logs
- Specifying configuration files:
    - `-config FILE`: path to simulation configuration file
    - `-topology FILE`: path to topology configuration file
    - `-traffic FILE`: path to traffic flow configuration file
- Simulation configuration overrides:
    - `-cycle_limit`: maximum number of cycles simulated
    - `-routing_algorithm`: routing algorithm used, from [XY]
    - `-buffer_size`: total size of a buffer in bytes
    - `-flit_size`: filt size in bytes

### Simulation Configuration File
High level simulation configuration is defined in a *.yaml* file.
``` yaml 
# Maximum number of cycles simulated
cycle_limit: 16000
# Maximum priority a traffic flow may possess
max_priority: 4
# Total size of a buffer in bytes
buffer_size: 16
# Flit size in bytes
flit_size: 4
# Routing algorithm used, from [XY]
routing_algorithm: XY
# Header processing delay experianced in each router.
# TODO: can header flits be processed similtanously?
processing_delay: 6
```

### Topology Configuration File
Network topology are defined using GraphML files.
Every node must contain attribute data specifying it's relative (x, y) position.
Every edge definition will create a full duplex connection between specified nodes.
I.e. only `n1 - n2` needs be defined as opposed to `n1 -> n2` & `n2 -> n1`.
``` xml
<?xml version="1.0" encoding="UTF-8"?>
<graphml xmlns="http://graphml.graphdrawing.org/xmlns"  
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">
  <graph id="G" edgedefault="undirected">
    <node id="n1">
        <data key="x">0</data>
        <data key="y">0</data>
    </node>
    <node id="n2">
        <data key="x">1</data>
        <data key="y">0</data>
    </node>
    <node id="n3">
        <data key="x">2</data>
        <data key="y">0</data>
    </node>
    <edge id="e1" source="n1" target="n2"/>
    <edge id="e2" source="n2" target="n3"/>
  </graph>
</graphml>
```

### Traffic Flow Configuration File
Traffic flows are configured using a *.csv* file.
``` csv
id,src,dst,priority,period,deadline,jitter,packet_size
t1,n1,n3,1,50,100,0,4
t2,n1,n2,1,60,100,0,4
t3,n2,n3,2,50,100,0,4
```
- `id`: unique id
- `src`: source node's id
- `dst`: destination node's id
- `priority`: priority all packets generated by the traffic flow will posses
- `period`: interval in cycles, between packets released by this traffic flow
- `deadline`: number of cycles within which packets must arrive at their destination node
- `jitter`: maximum additional jitter that a packet release may experiance
    - A packet with period $r$, and maximum jitter $j$ will be released $x$ cycles after the period packet where $r \leq x \leq r+j$
- `packet_size`: size of the packet's payload in bytes